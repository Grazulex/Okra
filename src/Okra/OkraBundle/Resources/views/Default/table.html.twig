{% extends "::base.html.twig" %}


{% block title %}
    {% trans %}Order{% endtrans %} - {{ order.id }}      
{% endblock %}

{% block content_header %}
  
{% endblock %}

{% block content %}
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">{% trans %}Resume{% endtrans %}</h3>
        </div>
        <div class="panel-body">
            <div class="huges">
            {% trans %}Tabel{% endtrans %} :  {{ order.idTable}} / {% trans %}Order ID{% endtrans %} : 
                {% if order.idOrderManual %}
                    {{ order.idOrderManual }}
                {% else %}
                    {{ order.id }}
                {% endif %}
            / {% trans %}Total{% endtrans %} : {{ order.total | craue_currency('EUR')}}    
            / {% trans %}User{% endtrans %} : {{ order.idUser.username}}
            </div>
        </div>
    </div>   
            
        
    <div class="row">
        <div class="col-lg-6">
            <h4>{% trans %}On the order{% endtrans %}</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" style="font-size:11px;">
                    <thead>
                        <tr>
                            <th>{% trans %}Item{% endtrans %}</th>
                            <th>{% trans %}Price{% endtrans %}</th>
                            <th>{% trans %}Quantity{% endtrans %}</th>
                            <th>{% trans %}Total{% endtrans %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for orderitem in orderitems %}
                            <tr>
                                <td>
                                    {% if orderitem.idItem.idCategory.name == orderitem.idItem.name %}
                                        {{ orderitem.idItem.name }}
                                    {% else %}
                                        {{ orderitem.idItem.idCategory.name }} - {{ orderitem.idItem.name }}
                                    {% endif %}
                                </td>
                                <td>
                                    {{ orderitem.price | craue_currency('EUR') }}
                                </td>      
                                <td>
                                    {{ orderitem.quantity }}
                                </td>    
                                <td>
                                    {{ (orderitem.price * orderitem.quantity) | craue_currency('EUR') }}
                                </td>                                  
                            </tr>
                        {% endfor %}       
                    </tbody>
                </table>
            </div>
        </div>
                        
                        
        <div class="col-lg-6">
            <h4>{% trans %}Add{% endtrans %}</h4>
            {{ form_start(form) }}
                <div class="panel-group" id=accordion">
                    {% for category in categories %}
                        <div class="panel panel-default">
                            <div class="panel-heading">
                              <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapse{{ category.id }}">
                                  {{ category.name }}
                                </a>
                              </h4>
                            </div>
                            <div id="collapse{{ category.id }}" class="panel-collapse collapse">
                              <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table"  style="font-size:11px;">
                                        <thead>
                                            <tr>
                                                <th>{% trans %}Item{% endtrans %}</th>
                                                <th>{% trans %}Price{% endtrans %}</th>
                                                <th>{% trans %}Quantity{% endtrans %}</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in items[category.id] %}
                                                <tr>
                                                    <td>
                                                        {{ item.name }}
                                                    </td>
                                                    <td>
                                                        {{ item.price | craue_currency('EUR') }}
                                                    </td>
                                                    <td>
                                                        <input type="number" name="quant[{{ item.id }}]" class="form-control input-sm">                                                                
                                                    </td>
                                                </tr>
                                            {% endfor %}  
                                        </tbody>
                                    </table>
                                </div>
                              </div>
                            </div>
                        </div>
                    {% endfor %}                    
                </div>
            {{ form_end(form) }}  
        </div>
        <div class="col-lg-12">
            <a href="{{ path('okra_homepage') }}">
                <button type="button" class="btn btn-default">  
                    {% trans %}Back to the list{% endtrans %}
                </button>
            </a>                 
            <a href="{{ path('okra_close', {'tableId': order.id}) }}">
                <button type="button" class="btn btn-danger"> 
                    {% trans %}Close & print{% endtrans %}
                </button>
            </a>    
        </div>
    </div>                
{% endblock %}
